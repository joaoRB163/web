<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Java Script</title>
        <style>
            #formulario{
                display: flex;
                flex-direction: column;
            }
            #listagem{
                background-color: gray;
                border: 1px solid black;
            }
        </style>
    </head>
    <body>
        <div id="formulario">
            <button id="limpar">Limpar</button>
            <label for="id">id</label>
            <input type="text" name="id" id="id" readonly>
            <label for="nome">nome</label>
            <input type="text" name="nome" id="nome">
            
            <label for="email">email</label>
            <input type="text" name="email" id="email">
            
            <button id="cadastro">Cadastrar</button>
        </div>

        <div id="listagem"></div>

        <script>
            let inputId=document.querySelector("#id");
            let inputNome=document.querySelector("#nome");
            let inputEmail=document.querySelector("#email");

            let listagem = document.querySelector("#listagem");
            
            let button=document.querySelector("#cadastro");
            let limpar = document.querySelector("#limpar");

            if(localStorage.getItem("listaNomes")){
                listaNomes = JSON.parse(localStorage.getItem("listaNomes"));
            } else {
                var listaNomes = [];
            }

            button.addEventListener("click", ()=>{
                let maxid = listaNomes.length + 1;
                listaNomes.push({
                    "id":maxid, 
                    "nome":inputNome.value, 
                    "email":inputEmail.value
                });
                console.log(listaNomes);
                listagemPessoas();
                localStorage.setItem("listaNomes", JSON.stringify(listaNomes));
            });
            
            function listagemPessoas(){
                listagem.innerHTML="";
                listaNomes.forEach((e)=>{
                    var item = `<div class="itemLista">
                        <input type="text" class="id" value=${e.id}>
                        <input type="text" class="nome" value=${e.nome}>
                        <input type="text" class="email" value=${e.email}>
                        <button id="editar">Editar</button>
                        <button id="excluir">Excluir</button>
                    </div>`;
                    
                    listagem.innerHTML+=item;
                })
            }
            
            limpar.addEventListener("click", ()=>{
                localStorage.clear();
                listagem.innerHTML="";
            });

            listagemPessoas();
        </script>
    </body>
</html>